@import "../proto/base.css";

:root
{
    --inputHeight:          40px;

    --trackHeight:         var( --line-height-s );
    --trackLetterSpacing:  0.4px;

    --borderWidth:          1px;
    --borderTotal:          calc( var( --borderWidth ) * 2 ); /* both sides when calculating size */

    --circleSize:           calc( var( --line-height-m ) - var( --borderTotal ) );
    --circleOffset:         calc( ( var( --trackHeight ) - var( --circleSize ) - var( --borderTotal ) ) / 2 );

    --backgroundTransition: background-color 0.2s ease-in-out;
    --circleTransition:     left 0.25s cubic-bezier( 0.215, 0.61, 0.355, 1 );
    --textTransition:       opacity 0.2s cubic-bezier( 0.23, 1, 0.32, 1 ); /* easeOutQuint */
}

.default
{
    display:        flex;
    align-items:    center;

    width:          auto;
    height:         var( --inputHeight );

    .input
    {
        position:   absolute;
        left:       -9999px;
    }

    .label
    {
        position:       relative;
        display:        flex;

        box-sizing:     border-box;
        min-width:      calc( 2 * ( var( --circleSize ) + var( --circleOffset ) ) );
        height:         var( --trackHeight );

        border-radius:  calc( var( --trackHeight ) / 2 );

        background:     var( --PC-GREY );

        cursor:         pointer;
        transition:     var( --backgroundTransition );

        &::before
        {
            content:        '';

            display:        block;
            position:       absolute;

            top:            var( --circleOffset );
            left:           var( --circleOffset );

            width:          var( --circleSize );
            height:         var( --circleSize );

            border-radius:  100%;
            border-style:   solid;
            border-width:   var( --borderWidth );
            border-color:   var( --PC-GREY );

            background:     var( --PC-WHITE );

            transition:     var( --circleTransition );
        }
    }

    .off,
    .on
    {
        display:            flex;
        justify-content:    center;
        align-items:        center;

        box-sizing:         border-box;

        width:              100%;

        padding:            0 var( --spacing-1 );

        @extend %Nessie-SemiBold;
        color:              var( --PC-WHITE );
        font-size:          var( --typo-1 );
        line-height:        var( --line-height-s );
        letter-spacing:     var( --trackLetterSpacing );
        text-transform:     uppercase;

        overflow:           hidden;
        white-space:        nowrap;
        text-overflow:      ellipsis;

        transition:         var( --textTransition );
    }

    .off
    {
        padding-left:   calc( var( --circleOffset ) + var( --circleSize ) + var( --spacing-1 ) );
    }

    .on
    {
        position:       absolute; /* necessary to overlay on over off */
        top:            0;
        bottom:         0;
        left:           0;
        right:          0;

        padding-right:  calc( var( --spacing-1 ) + var( --circleOffset ) + var( --circleSize )  );

        opacity:        0;
    }

    .input:checked + .label
    {
        background: var( --PC-BLUE );
        transition: var( --backgroundTransition );

        &::before
        {
            left:           calc( 100% - ( var( --circleOffset ) + var( --circleSize ) ) );
            border-color:   var( --PC-BLUE );
        }

        .on
        {
            opacity:    1;
        }

        .off
        {
            opacity:    0;
        }
    }

    .input:focus
    {
        & + .label
        {
            background: var( --PC-GREY );

            /* mimic native browser focus */
            outline:    auto 2px highlight;
            outline:    auto 5px -webkit-focus-ring-color;
        }

        &:checked + .label
        {
            background: var( --PC-BLUE );
        }
    }

    :hover,
    .fakeHovered
    {
        .label
        {
            background: var( --PC-GREY );
        }

        .input:checked + .label
        {
            background: var( --PC-BLUE );
        }
    }
}

.disabled
{
    .label
    {
        cursor:     default;
        background: var( --PC-GREY--L40 );

        &::before
        {
            border-color: var( --PC-GREY--L40 );
        }
    }

    .input:checked + .label
    {
        background: var( --PC-BLUE--L55 );

        &::before
        {
            border-color: var( --PC-BLUE--L55 );
        }
    }

    :hover,
    .fakeHovered
    {
        .label
        {
            background: var( --PC-GREY--L40 );

            &::before
            {
                border-color: var( --PC-GREY--L40 );
            }
        }

        input:checked + .label
        {
            background: var( --PC-BLUE--L55 );

            &::before
            {
                border-color: var( --PC-BLUE--L55 );
            }
        }
    }
}
